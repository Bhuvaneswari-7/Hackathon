<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Event Connect — Events</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

  :root{
    --primary:#e23744; --dark:#0f1724; --muted:#6b7280;
    --card:#fff;
  }

  /* Animated gradient background */
  @keyframes gradientBG {
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
  }

  body{
    margin:0;
    font-family: 'Inter', Arial, sans-serif;
    background: linear-gradient(270deg, #6a11cb, #2575fc, #6a11cb, #f43b47, #2575fc);
    background-size: 1000% 1000%;
    animation: gradientBG 15s ease infinite;
    color: var(--dark);
  }

  nav{
    display:flex;
    justify-content:center;
    gap:18px;
    padding:14px;
    background:#111;
    color:#fff;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  nav a{
    color:#fff;
    text-decoration:none;
    font-weight:600;
  }

  .toolbar{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:center;
    padding:18px 12px;
  }

  .select, .search{
    padding:10px 12px;
    border-radius:8px;
    border:1px solid #e6e9ef;
    font-size:14px;
  }

  .container{
    max-width:1100px;
    margin:10px auto 40px;
    padding:6px;
    background: rgba(255, 255, 255, 0.85);
    border-radius: 16px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:18px;
  }

  .card{
    background: var(--card);
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 12px 30px rgba(16,24,40,0.06);
    transition: transform .25s, box-shadow .25s;
  }
  .card:hover{
    transform:translateY(-8px);
    box-shadow:0 18px 40px rgba(16,24,40,0.12);
  }

  .poster{
    height:160px;
    background-size:cover;
    background-position:center;
  }

  .body{
    padding:14px;
  }

  .title{
    font-weight:700;
    margin:0 0 6px;
  }

  .meta{
    color: var(--muted);
    font-size:13px;
  }

  .badge{
    display:inline-block;
    background: var(--primary);
    color:#fff;
    padding:6px 10px;
    border-radius:999px;
    margin-top:8px;
    font-weight:700;
  }

  .row{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-top:10px;
    gap:8px;
  }

  .btn{
    background: var(--primary);
    color:#fff;
    padding:8px 12px;
    border-radius:10px;
    border:none;
    cursor:pointer;
  }

  .free{
    background:#10b981;
  }

  .toast{
    position:fixed;
    right:18px;
    bottom:18px;
    background:#111;
    color:#fff;
    padding:10px 14px;
    border-radius:8px;
    opacity:0;
    transform:translateY(12px);
    transition: all .25s;
    z-index: 200;
  }
  .toast.show{
    opacity:1;
    transform:translateY(0);
  }

  /* modal */
  .modal{
    display:none;
    position:fixed;
    left:0;top:0;right:0;bottom:0;
    background:rgba(0,0,0,.5);
    align-items:center;
    justify-content:center;
    z-index: 300;
  }
  .modal-card{
    background:#fff;
    padding:18px;
    border-radius:12px;
    width:320px;
    box-shadow:0 18px 40px rgba(16,24,40,0.2);
    position:relative;
  }
  .close{
    position:absolute;
    right:10px;top:8px;
    border:none;
    background:transparent;
    font-size:18px;
    cursor:pointer;
  }

  input{
    width:100%;
    padding:9px;
    margin:8px 0;
    border-radius:8px;
    border:1px solid #e6e9ef;
  }

  .filters{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    justify-content:center;
    margin-bottom:16px;
  }

  .location-pill{
    padding:6px 10px;
    border-radius:999px;
    border:1px solid #eee;
    cursor:pointer;
    user-select:none;
  }

  .location-pill.active{
    background: var(--primary);
    color:#fff;
    border:none;
  }

  #backBtn {
    display: block;
    margin: 20px auto 40px;
    padding: 12px 24px;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 700;
    font-size: 16px;
    box-shadow: 0 6px 18px rgba(226, 55, 68, 0.7);
    transition: background 0.3s ease;
  }
  #backBtn:hover {
    background: #bf2a38;
  }

  @media(max-width:420px){
    .toolbar{
      flex-direction:column;
      gap:8px;
    }
  }
</style>
</head>
<body>

<nav>
  <a href="home.html">Home</a>
  <a href="events.html">Events</a>
  <a href="My events-cart.html">My Events Cart</a>
  <a href="share-event.html">Share</a>
</nav>

<div class="toolbar">
  <select id="citySelect" class="select" aria-label="Choose city">
    <option value="">All cities</option>
    <option>Bangalore</option>
    <option>Hyderabad</option>
    <option>Mumbai</option>
    <option>Delhi</option>
  </select>

  <input id="searchInput" class="search" placeholder="Search events or category..." aria-label="Search events or category" />
</div>

<div class="container">
  <div class="filters" id="quickLocations">
    <div class="location-pill" data-city="">All</div>
    <div class="location-pill" data-city="Bangalore">Bangalore</div>
    <div class="location-pill" data-city="Hyderabad">Hyderabad</div>
    <div class="location-pill" data-city="Mumbai">Mumbai</div>
    <div class="location-pill" data-city="Delhi">Delhi</div>
  </div>

  <div class="grid" id="eventsGrid"></div>

  <button id="backBtn" aria-label="Go back to previous page or home">← Back</button>
</div>

<!-- register modal -->
<div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal-card">
    <button class="close" onclick="closeModal()" aria-label="Close modal">✕</button>
    <h3 id="modalTitle">Register</h3>
    <p id="modalMeta" style="color:#6b7280;font-size:14px;margin-top:6px"></p>
    <div style="margin-top:10px">
      <input id="regName" placeholder="Your name" aria-label="Your name" />
      <input id="regEmail" placeholder="Email" aria-label="Email" />
      <input id="regPhone" placeholder="Phone" aria-label="Phone number" />
      <button class="btn" id="submitReg">Confirm & Add to My Events</button>
    </div>
  </div>
</div>

<div class="toast" id="toast" role="alert" aria-live="assertive">Saved to My Events</div>

<script>
  // sample events with location and poster images
  const EVENTS = [
    { id: 'e1', title: "React Workshop", date:"20 Aug 2025", time:"10:00 AM", venue:"Bangalore | Tech Park", fee:"₹500", city:"Bangalore", img:"https://images.unsplash.com/photo-1522071820081-009f0129c71c" },
    { id: 'e2', title: "Startup Meetup", date:"22 Aug 2025", time:"6:00 PM", venue:"Hyderabad | Innovation Hub", fee:"Free", city:"Hyderabad", img:"https://images.unsplash.com/photo-1557800636-894a64c1696f" },
    { id: 'e3', title: "Music Fest", date:"15 Sep 2025", time:"7:30 PM", venue:"Mumbai | City Grounds", fee:"₹799", city:"Mumbai", img:"https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4" },
    { id: 'e4', title: "Art Expo", date:"25 Aug 2025", time:"11:00 AM", venue:"Delhi | Gallery 21", fee:"Free", city:"Delhi", img:"https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c" },
    { id: 'e5', title: "Food Carnival", date:"05 Sep 2025", time:"4:00 PM", venue:"Bangalore | Central Park", fee:"₹299", city:"Bangalore", img:"https://images.unsplash.com/photo-1504674900247-0877df9cc836" },
    { id: 'e6', title: "Dance Night", date:"20 Dec 2025", time:"9:00 PM", venue:"Mumbai | Club X", fee:"₹1499", city:"Mumbai", img:"https://images.unsplash.com/photo-1519985176271-adb1088fa94c" }
  ];

  const grid = document.getElementById('eventsGrid');
  const citySelect = document.getElementById('citySelect');
  const search = document.getElementById('searchInput');
  const toast = document.getElementById('toast');
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modalTitle');
  const modalMeta = document.getElementById('modalMeta');
  const backBtn = document.getElementById('backBtn');
  let selectedEvent = null;

  function renderEvents(filterCity='', q='') {
    grid.innerHTML = '';
    const qLower = q.trim().toLowerCase();
    const filtered = EVENTS.filter(ev => {
      const cityMatch = !filterCity || ev.city === filterCity;
      const queryMatch = qLower === '' || (ev.title + ' ' + ev.venue + ' ' + ev.city).toLowerCase().includes(qLower);
      return cityMatch && queryMatch;
    });
    if(filtered.length === 0){
      grid.innerHTML = '<div style="grid-column:1/-1;text-align:center;color:#ef4444;font-weight:600">No events found for this search/location.</div>';
      return;
    }
    filtered.forEach(ev => {
      const c = document.createElement('div');
      c.className = 'card';
      c.innerHTML = `
        <div class="poster" style="background-image:url('${ev.img}?auto=format&fit=crop&w=800&q=60')"></div>
        <div class="body">
          <div class="title">${ev.title}</div>
          <div class="meta">${ev.date} • ${ev.time}</div>
          <div class="meta">${ev.venue}</div>
          <div class="row">
            <div class="badge">${ev.city}</div>
            <div style="text-align:right">
              <div class="meta" style="margin-right:8px">${ev.fee}</div>
              <button class="btn" onclick="openRegister('${ev.id}')">Register</button>
            </div>
          </div>
        </div>`;
      grid.appendChild(c);
    });
  }

  // quick location pills
  document.getElementById('quickLocations').addEventListener('click', e => {
    const pill = e.target.closest('.location-pill');
    if(!pill) return;
    document.querySelectorAll('.location-pill').forEach(p=>p.classList.remove('active'));
    pill.classList.add('active');
    const city = pill.dataset.city || '';
    citySelect.value = city;
    renderEvents(city, search.value);
  });

  // filters
  citySelect.addEventListener('change', ()=> renderEvents(citySelect.value, search.value));
  search.addEventListener('input', ()=> renderEvents(citySelect.value, search.value));

  function openRegister(id){
    selectedEvent = EVENTS.find(x => x.id === id);
    modalTitle.textContent = `Register: ${selectedEvent.title}`;
    modalMeta.textContent = `${selectedEvent.date} • ${selectedEvent.time} • ${selectedEvent.venue}`;
    document.getElementById('regName').value = '';
    document.getElementById('regEmail').value = '';
    document.getElementById('regPhone').value = '';
    modal.style.display = 'flex';
  }
  function closeModal(){ modal.style.display = 'none'; }

  // registration submission with validation
  document.getElementById('submitReg').addEventListener('click', () => {
    const name = document.getElementById('regName').value.trim();
    const email = document.getElementById('regEmail').value.trim();
    const phone = document.getElementById('regPhone').value.trim();

    if (!name || !email || !phone) {
      alert('Please fill all details');
      return;
    }

    // Name validation: alphabets and spaces only
    if (!/^[A-Za-z\s]+$/.test(name)) {
      alert('Please enter a valid name with alphabets only.');
      return;
    }

    // Email validation: must include @gmail.com exactly at the end
    if (!email.endsWith('@gmail.com') || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      alert('Please enter a valid email address with @gmail.com.');
      return;
    }

    // Phone validation: start with 6,7,8,9 and exactly 10 digits
    if (!/^[6-9]\d{9}$/.test(phone)) {
      alert('Please enter a valid 10-digit mobile number starting with 6,7,8, or 9.');
      return;
    }

    const myEvents = JSON.parse(localStorage.getItem('myEvents') || '[]');
    myEvents.push({ id: selectedEvent.id, title: selectedEvent.title, date: selectedEvent.date, time: selectedEvent.time, venue: selectedEvent.venue, fee: selectedEvent.fee, city: selectedEvent.city, name, email, phone });
    localStorage.setItem('myEvents', JSON.stringify(myEvents));

    toast.textContent = `Registered for ${selectedEvent.title}`;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 2200);

    closeModal();
  });

  backBtn.addEventListener('click', () => {
    if(history.length > 1){
      history.back();
    } else {
      location.href = 'home.html';
    }
  });

  // initialize
  renderEvents();
</script>
</body>
</html>
